<div class="todo-list-container">
  <div class="todo-list-header">
    <h2>Mis Tareas</h2>
    <button 
      mat-fab 
      color="primary" 
      (click)="onAddTodo()"
      aria-label="Agregar tarea"
    >
      <mat-icon>add</mat-icon>
    </button>
  </div>

  <div class="filters">
    <mat-button-toggle-group 
      [value]="filter$ | async"
      (change)="onFilterChange($event.value)"
      aria-label="Filtros de tareas"
    >
      <mat-button-toggle value="all">
        <mat-icon>list</mat-icon>
        Todas
      </mat-button-toggle>
      <mat-button-toggle value="pending">
        <mat-icon>radio_button_unchecked</mat-icon>
        Pendientes
      </mat-button-toggle>
      <mat-button-toggle value="completed">
        <mat-icon>check_circle</mat-icon>
        Completadas
      </mat-button-toggle>
    </mat-button-toggle-group>
  </div>

  <div class="todo-list-content">
    <div *ngIf="loading$ | async" class="loading-spinner">
      <mat-spinner></mat-spinner>
    </div>

    <div *ngIf="!(loading$ | async)" class="todos-container">
      <ng-container *ngIf="(todos$ | async) as todos">
        <div *ngIf="todos.length === 0" class="empty-state">
          <mat-icon>inbox</mat-icon>
          <h3>No hay tareas</h3>
          <p>Comienza agregando una nueva tarea</p>
        </div>

        <app-todo-item
          *ngFor="let todo of todos; trackBy: trackByTodoId"
          [todo]="todo"
          (toggleComplete)="onToggleComplete($event)"
          (edit)="onEditTodo($event)"
          (delete)="onDeleteTodo($event)"
        ></app-todo-item>
      </ng-container>
    </div>
  </div>
</div>
